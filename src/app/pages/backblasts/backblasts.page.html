<ion-header>
  <ion-toolbar>
    <ion-title>Backblasts</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Filter Rules Section -->
  <div class="filter-section">
    <ion-button (click)="addFilterRule()">Add Filter</ion-button>
    <div *ngFor="let rule of filterState.rules; let i = index" class="filter-rule">
      <ion-item>
        <ion-label>Field</ion-label>
        <ion-select [(ngModel)]="rule.field" (ionChange)="applyFilter()">
          <ion-select-option value="qs">Qs</ion-select-option>
          <ion-select-option value="pax">PAX</ion-select-option>
          <ion-select-option value="ao">AO</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Operator</ion-label>
        <ion-select [(ngModel)]="rule.operator" (ionChange)="applyFilter()">
          <ion-select-option *ngIf="rule.field !== 'ao'" value="includes">includes</ion-select-option>
          <ion-select-option *ngIf="rule.field !== 'ao'" value="does not include">does not include</ion-select-option>
          <ion-select-option *ngIf="rule.field === 'ao'" value="is">is</ion-select-option>
          <ion-select-option *ngIf="rule.field === 'ao'" value="is not">is not</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Value</ion-label>
        <ion-input [(ngModel)]="rule.value" (ionChange)="applyFilter()"></ion-input>
      </ion-item>

      <ion-button color="danger" (click)="removeFilterRule(i)">Remove</ion-button>
    </div>
  </div>

  <!-- Backblast Grid -->
  <app-backblast-grid [backblasts]="backblasts"></app-backblast-grid>

  <div class="center-container">
    <h2 *ngIf="filteredBackblasts?.length && loading">
      Loading...
    </h2>
    <ion-button *ngIf="showLoadMore" (click)="loadMore()">
      Load More
    </ion-button>
    <h2 *ngIf="filteredBackblasts?.length === 0">
      No backblasts to show for the selected filters
    </h2>
  </div>
</ion-content>
